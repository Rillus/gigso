<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FrequencyMonitor Component - Gigso Demo</title>
    <meta name="description" content="Interactive demo of FrequencyMonitor component">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(180deg, #F9E6C3 0%, #ffffff 100%);
            min-height: 100vh;
        }

        /* Header */
        .demo-header {
            background: linear-gradient(135deg, #08113e 0%, #0DC9BB 100%);
            color: white;
            padding: 60px 20px 40px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .demo-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 20"><defs><pattern id="music" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse"><circle cx="10" cy="10" r="1" fill="rgba(255,255,255,0.1)"/></pattern></defs><rect width="100" height="20" fill="url(%23music)"/></svg>');
            animation: float 20s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateX(0px) translateY(0px); }
            50% { transform: translateX(-10px) translateY(-5px); }
        }

        .demo-header-content {
            position: relative;
            z-index: 2;
            max-width: 1200px;
            margin: 0 auto;
        }

        .demo-header h1 {
            font-size: clamp(2.5rem, 5vw, 3.5rem);
            font-weight: 700;
            margin-bottom: 1rem;
            background: linear-gradient(45deg, #FFE448, #F9E6C3);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }

        .demo-breadcrumb {
            margin-bottom: 20px;
            opacity: 0.9;
        }

        .demo-breadcrumb a {
            color: rgba(255,255,255,0.8);
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .demo-breadcrumb a:hover {
            color: #FFE448;
        }

        .demo-header p {
            font-size: 1.3rem;
            opacity: 0.9;
            margin-bottom: 30px;
        }

        .demo-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 24px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(45deg, #F67E07, #FFE448);
            color: #08113e;
            box-shadow: 0 4px 15px rgba(246, 126, 7, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(246, 126, 7, 0.4);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
            border-color: rgba(255, 255, 255, 0.5);
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Component Showcase */
        .component-showcase {
            background: white;
            border-radius: 20px;
            padding: 40px;
            margin: -30px 20px 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.08);
            position: relative;
            z-index: 10;
        }

        .showcase-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .showcase-header h2 {
            font-size: 2rem;
            color: #08113e;
            margin-bottom: 10px;
        }

        .showcase-header p {
            color: #6c757d;
            font-size: 1.1rem;
        }

        .component-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 200px;
            border: 2px dashed #e9ecef;
            border-radius: 15px;
            background: #f8f9fa;
        }

        /* Controls Section */
        .controls-section {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.08);
        }

        .controls-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
        }

        .controls-header h3 {
            font-size: 1.5rem;
            color: #08113e;
            margin: 0;
        }

        .controls-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .control-group label {
            font-weight: 600;
            color: #08113e;
            font-size: 0.9rem;
        }

        .control-group button {
            padding: 12px 20px;
            background: linear-gradient(45deg, #F67E07, #FFE448);
            color: #08113e;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .control-group button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(246, 126, 7, 0.3);
        }

        .control-group button.secondary {
            background: linear-gradient(45deg, #6c757d, #adb5bd);
            color: white;
        }

        .control-group button.secondary:hover {
            box-shadow: 0 4px 12px rgba(108, 117, 125, 0.3);
        }

        /* Status */
        .status {
            padding: 15px 20px;
            border-radius: 10px;
            font-weight: 500;
            margin-top: 20px;
        }

        .status.info {
            background: rgba(13, 201, 187, 0.1);
            color: #0DC9BB;
            border-left: 4px solid #0DC9BB;
        }

        .status.success {
            background: rgba(96, 176, 91, 0.1);
            color: #60B05B;
            border-left: 4px solid #60B05B;
        }

        .status.warning {
            background: rgba(250, 177, 92, 0.1);
            color: #FAB15C;
            border-left: 4px solid #FAB15C;
        }

        .status.error {
            background: rgba(225, 69, 62, 0.1);
            color: #E1453E;
            border-left: 4px solid #E1453E;
        }

        /* Documentation Section */
        .docs-section {
            background: white;
            border-radius: 20px;
            padding: 0;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.08);
            overflow: hidden;
        }

        .tabs {
            display: flex;
            border-bottom: 2px solid #f8f9fa;
            background: #f8f9fa;
        }

        .tab {
            padding: 15px 25px;
            border: none;
            background: transparent;
            color: #6c757d;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            flex: 1;
            text-align: center;
        }

        .tab:hover {
            background: rgba(13, 201, 187, 0.1);
            color: #0DC9BB;
        }

        .tab.active {
            background: white;
            color: #08113e;
            border-bottom: 3px solid #0DC9BB;
        }

        .tab-content {
            display: none;
            padding: 30px;
        }

        .tab-content.active {
            display: block;
        }

        .tab-content h3 {
            color: #08113e;
            margin-bottom: 15px;
            font-size: 1.5rem;
        }

        .tab-content p {
            margin-bottom: 15px;
            line-height: 1.6;
        }

        /* Event Log */
        .event-log {
            background: #1a1a1a;
            color: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            max-height: 300px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
        }

        .event {
            margin-bottom: 5px;
            padding: 5px 0;
        }

        .event.info { color: #0DC9BB; }
        .event.success { color: #60B05B; }
        .event.warning { color: #FAB15C; }
        .event.error { color: #E1453E; }

        /* Footer */
        .demo-footer {
            background: #08113e;
            color: white;
            padding: 40px 20px;
            text-align: center;
            margin-top: 50px;
        }

        .demo-footer p {
            opacity: 0.8;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .demo-actions {
                flex-direction: column;
                align-items: center;
            }

            .btn {
                width: 100%;
                max-width: 300px;
                justify-content: center;
            }

            .component-showcase {
                margin: -30px 10px 30px;
                padding: 30px 20px;
            }

            .controls-grid {
                grid-template-columns: 1fr;
            }

            .tabs {
                flex-wrap: wrap;
            }

            .tab {
                flex: 1;
                min-width: 120px;
                text-align: center;
            }
        }

        /* Page Layout with Navigation */
        .page-layout {
            display: flex;
            min-height: calc(100vh - 200px);
        }

        .nav-sidebar {
            width: 280px;
            background: #f8f9fa;
            border-right: 1px solid #dee2e6;
            flex-shrink: 0;
        }

        .main-content {
            flex: 1;
            min-width: 0;
        }

        @media (max-width: 1024px) {
            .page-layout {
                flex-direction: column;
            }
            
            .nav-sidebar {
                width: 100%;
                border-right: none;
                border-bottom: 1px solid #dee2e6;
            }
        }
    </style>
</head>
<body>
    <div class="demo-header">
        <div class="demo-header-content">
            <div class="demo-breadcrumb">
                <a href="index.html">← Back to Gigso Home</a> • 
                <a href="demos.html">All Demos</a> • 
                <span>FrequencyMonitor</span>
            </div>
            <h1>📈 FrequencyMonitor Demo</h1>
            <p>Frequency monitoring and analysis component for audio applications</p>
            <div class="demo-actions">
                <a href="all-together-demo.html" class="btn btn-secondary">🎵 Try Full Demo</a>
                <a href="demos.html" class="btn btn-secondary">📚 More Components</a>
            </div>
        </div>
    </div>
    
    <div class="page-layout">
        <nav class="nav-sidebar">
            <demo-navigation></demo-navigation>
        </nav>
        
        <main class="main-content">
            <div class="container">
                <!-- Component Showcase -->
                <div class="component-showcase">
                    <div class="showcase-header">
                        <h2>Component Preview</h2>
                        <p>Interactive demonstration of the FrequencyMonitor component</p>
                    </div>
                    <div class="component-container" id="component-container">
                        <frequency-monitor id="demo-component"></frequency-monitor>
                    </div>
                </div>
                
                <!-- Controls Section -->
                <div class="controls-section">
                    <div class="controls-header">
                        <h3>🎛️ Interactive Controls</h3>
                    </div>
                    <div class="controls-grid" id="controls-grid">

                        <div class="control-group">
                            <label>Actions:</label>
                            <button id="test-component">Test Component</button>
                            <button id="reset-component" class="secondary">Reset</button>
                        </div>
                    
                    </div>
                    <div id="status" class="status info">
                        FrequencyMonitor component loaded! Use the controls above to interact with the component.
                    </div>
                </div>
                
                <!-- Documentation Section -->
                <div class="docs-section">
                    <div class="tabs">
                        <button class="tab active" onclick="showTab('overview')">Overview</button>
                        <button class="tab" onclick="showTab('api')">API Reference</button>
                        <button class="tab" onclick="showTab('events')">Events</button>
                        <button class="tab" onclick="showTab('examples')">Examples</button>
                        <button class="tab" onclick="showTab('events-log')">Event Log</button>
                    </div>
                    
                    <!-- Overview Tab -->
                    <div id="overview" class="tab-content active">
                        <h3>Component Overview</h3>
                        <p>The FrequencyMonitor component provides real-time monitoring and analysis of audio frequencies, helping users understand the spectral content of their audio signals.</p>
                        <p>This interactive demo allows you to explore all the features and capabilities of the FrequencyMonitor component. Use the controls above to test the component's functionality and see how it integrates with other audio analysis components.</p>
                    </div>
                    
                    <!-- API Reference Tab -->
                    <div id="api" class="tab-content">
                        <h3>API Reference</h3>
                        <p>The FrequencyMonitor component provides a comprehensive API for integration into your applications.</p>
                        <p><strong>Properties:</strong> Configure the component with various properties to customize appearance and monitoring behavior.</p>
                        <p><strong>Methods:</strong> Programmatically control the frequency monitoring using built-in methods for starting/stopping analysis.</p>
                        <p><strong>Events:</strong> Listen to component events to respond to frequency changes and user interactions.</p>
                    </div>
                    
                    <!-- Events Tab -->
                    <div id="events" class="tab-content">
                        <h3>Component Events</h3>
                        <p>The FrequencyMonitor component emits various events that you can listen to:</p>
                        <p>• <strong>Frequency Detected:</strong> Fired when a new frequency is detected</p>
                        <p>• <strong>Peak Frequency:</strong> Fired when the dominant frequency changes</p>
                        <p>• <strong>Analysis Start:</strong> Fired when frequency monitoring begins</p>
                        <p>• <strong>Analysis Stop:</strong> Fired when frequency monitoring stops</p>
                        <p>View the Event Log tab to see real-time events as they occur.</p>
                    </div>
                    
                    <!-- Examples Tab -->
                    <div id="examples" class="tab-content">
                        <h3>Usage Examples</h3>
                        <p>Here are some common ways to use the FrequencyMonitor component in your projects:</p>
                        <p><strong>Basic Usage:</strong><br><code>&lt;frequencymonitor&gt;&lt;/frequencymonitor&gt;</code></p>
                        <p><strong>With Properties:</strong><br><code>&lt;frequencymonitor sensitivity="0.8" range="20-20000"&gt;&lt;/frequencymonitor&gt;</code></p>
                        <p><strong>Event Listeners:</strong><br><code>frequencyMonitor.addEventListener('frequency-detected', handleFrequencyDetected);</code></p>
                    </div>
                    
                    <!-- Event Log Tab -->
                    <div id="events-log" class="tab-content">
                        <h3>Event Log</h3>
                        <div class="event-log" id="event-log">
                            <div class="event info">Component initialized</div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    
    <script type="module">
        import './components/frequency-monitor/frequency-monitor.js';
        import './components/demo-navigation/demo-navigation.js';
        
        // Wait for component to be defined and upgraded
        function waitForComponent(componentName, maxAttempts = 50) {
            return new Promise((resolve, reject) => {
                let attempts = 0;
                
                const checkComponent = () => {
                    attempts++;
                    
                    if (customElements.get(componentName)) {
                        resolve();
                        return;
                    }
                    
                    if (attempts >= maxAttempts) {
                        reject(new Error(`Component ${componentName} failed to load after ${maxAttempts} attempts`));
                        return;
                    }
                    
                    setTimeout(checkComponent, 100);
                };
                
                checkComponent();
            });
        }
        
        // Setup component after it's ready
        function setupComponent() {
            const component = document.getElementById('demo-component');
            
            if (!component || component instanceof HTMLUnknownElement) {
                logEvent('Component not ready, retrying...', 'warning');
                setTimeout(setupComponent, 100);
                return;
            }
            
            // Component-specific event listeners
            
                // Frequency Monitor specific controls
                const startAnalysisBtn = document.getElementById('start-analysis');
                const stopAnalysisBtn = document.getElementById('stop-analysis');
                const sensitivityInput = document.getElementById('sensitivity');
                const thresholdInput = document.getElementById('threshold');
                const clearHistoryBtn = document.getElementById('clear-history');
                
                startAnalysisBtn.addEventListener('click', () => {
                    try {
                        component.startAnalysis();
                        logEvent('Frequency analysis started', 'success');
                        updateStatus('Frequency analysis is now active', 'success');
                    } catch (error) {
                        logEvent('Error starting analysis: ' + error.message, 'error');
                    }
                });
                
                stopAnalysisBtn.addEventListener('click', () => {
                    try {
                        component.stopAnalysis();
                        logEvent('Frequency analysis stopped', 'warning');
                        updateStatus('Frequency analysis stopped', 'warning');
                    } catch (error) {
                        logEvent('Error stopping analysis: ' + error.message, 'error');
                    }
                });
                
                sensitivityInput.addEventListener('change', (e) => {
                    try {
                        component.setSensitivity(parseFloat(e.target.value));
                        logEvent('Sensitivity changed to ' + e.target.value, 'info');
                        updateStatus('Sensitivity updated to ' + e.target.value);
                    } catch (error) {
                        logEvent('Error setting sensitivity: ' + error.message, 'error');
                    }
                });
                
                thresholdInput.addEventListener('change', (e) => {
                    try {
                        component.setThreshold(parseFloat(e.target.value));
                        logEvent('Threshold changed to ' + e.target.value + ' dB', 'info');
                        updateStatus('Threshold updated to ' + e.target.value + ' dB');
                    } catch (error) {
                        logEvent('Error setting threshold: ' + error.message, 'error');
                    }
                });
                
                clearHistoryBtn.addEventListener('click', () => {
                    try {
                        component.clearHistory();
                        logEvent('Frequency history cleared', 'warning');
                        updateStatus('Frequency history cleared');
                    } catch (error) {
                        logEvent('Error clearing history: ' + error.message, 'error');
                    }
                });
                
                // Listen for frequency monitor events
                component.addEventListener('frequency-detected', (e) => {
                    logEvent('Frequency detected: ' + e.detail.frequency + ' Hz', 'success');
                });
                
                component.addEventListener('peak-frequency', (e) => {
                    logEvent('Peak frequency: ' + e.detail.frequency + ' Hz', 'info');
                });
                
                component.addEventListener('analysis-start', (e) => {
                    logEvent('Analysis started', 'success');
                });
                
                component.addEventListener('analysis-stop', (e) => {
                    logEvent('Analysis stopped', 'warning');
                });
            
            
            // Log component initialization
            logEvent('Frequency Monitor component initialized', 'success');
            updateStatus('Frequency Monitor component ready for analysis');
        }
        
        document.addEventListener('DOMContentLoaded', async function() {
            try {
                await waitForComponent('frequency-monitor');
                logEvent('Frequency Monitor component loaded successfully', 'success');
                setupComponent();
            } catch (error) {
                logEvent('Failed to load Frequency Monitor component: ' + error.message, 'error');
                updateStatus('Component failed to load', 'error');
            }
        });
    </script>
    
</body>
</html>