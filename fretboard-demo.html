<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fretboard Component - Gigso Demo</title>
    <meta name="description" content="Interactive demo of Fretboard component">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(180deg, #F9E6C3 0%, #ffffff 100%);
            min-height: 100vh;
        }

        /* Header */
        .demo-header {
            background: linear-gradient(135deg, #08113e 0%, #0DC9BB 100%);
            color: white;
            padding: 60px 20px 40px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .demo-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 20"><defs><pattern id="music" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse"><circle cx="10" cy="10" r="1" fill="rgba(255,255,255,0.1)"/></pattern></defs><rect width="100" height="20" fill="url(%23music)"/></svg>');
            animation: float 20s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateX(0px) translateY(0px); }
            50% { transform: translateX(-10px) translateY(-5px); }
        }

        .demo-header-content {
            position: relative;
            z-index: 2;
            max-width: 1200px;
            margin: 0 auto;
        }

        .demo-header h1 {
            font-size: clamp(2.5rem, 5vw, 3.5rem);
            font-weight: 700;
            margin-bottom: 1rem;
            background: linear-gradient(45deg, #FFE448, #F9E6C3);
            background-clip: text;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }

        .demo-breadcrumb {
            margin-bottom: 20px;
            opacity: 0.9;
        }

        .demo-breadcrumb a {
            color: rgba(255,255,255,0.8);
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .demo-breadcrumb a:hover {
            color: #FFE448;
        }

        .demo-header p {
            font-size: 1.3rem;
            opacity: 0.9;
            margin-bottom: 30px;
        }

        .demo-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 24px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            border: none;
            cursor: pointer;
            font-size: 0.95rem;
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: translateY(-2px);
        }

        /* Container */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Component Showcase */
        .component-showcase {
            background: white;
            border-radius: 20px;
            padding: 40px;
            margin: -30px 20px 40px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
            position: relative;
            z-index: 3;
        }

        .showcase-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .showcase-header h2 {
            font-size: 2rem;
            font-weight: 700;
            color: #08113e;
            margin-bottom: 10px;
        }

        .showcase-header p {
            color: #6c757d;
            font-size: 1.1rem;
        }

        .component-container {
            background: rgba(249, 230, 195, 0.2);
            border: 2px solid rgba(13, 201, 187, 0.2);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            min-height: 400px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow-x: auto;
        }

        /* Controls Section */
        .controls-section {
            background: white;
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.08);
        }

        .controls-header h3 {
            font-size: 1.5rem;
            font-weight: 600;
            color: #08113e;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .controls-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .control-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .control-group label {
            font-weight: 600;
            color: #08113e;
            font-size: 0.9rem;
        }

        .control-group input,
        .control-group select {
            padding: 10px 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
        }

        .control-group input:focus,
        .control-group select:focus {
            outline: none;
            border-color: #0DC9BB;
        }

        .control-group button {
            padding: 10px 20px;
            background: linear-gradient(45deg, #F67E07, #FFE448);
            color: #08113e;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .control-group button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(246, 126, 7, 0.3);
        }

        .control-group button.secondary {
            background: linear-gradient(45deg, #6c757d, #adb5bd);
            color: white;
        }

        .control-group button.secondary:hover {
            box-shadow: 0 4px 12px rgba(108, 117, 125, 0.3);
        }

        /* Status */
        .status {
            padding: 15px 20px;
            border-radius: 10px;
            font-weight: 500;
            margin-top: 20px;
        }

        .status.info {
            background: rgba(13, 201, 187, 0.1);
            color: #0DC9BB;
            border-left: 4px solid #0DC9BB;
        }

        .status.success {
            background: rgba(96, 176, 91, 0.1);
            color: #60B05B;
            border-left: 4px solid #60B05B;
        }

        .status.warning {
            background: rgba(250, 177, 92, 0.1);
            color: #FAB15C;
            border-left: 4px solid #FAB15C;
        }

        .status.error {
            background: rgba(225, 69, 62, 0.1);
            color: #E1453E;
            border-left: 4px solid #E1453E;
        }

        /* Documentation Section */
        .docs-section {
            background: white;
            border-radius: 20px;
            padding: 0;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.08);
            overflow: hidden;
        }

        .tabs {
            display: flex;
            border-bottom: 2px solid #f8f9fa;
            background: #f8f9fa;
        }

        .tab {
            padding: 15px 25px;
            border: none;
            background: transparent;
            color: #6c757d;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
        }

        .tab.active {
            color: #0DC9BB;
            border-bottom-color: #0DC9BB;
            background: white;
        }

        .tab:hover:not(.active) {
            color: #08113e;
            background: rgba(13, 201, 187, 0.05);
        }

        .tab-content {
            padding: 30px;
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .tab-content h3 {
            font-size: 1.5rem;
            font-weight: 600;
            color: #08113e;
            margin-bottom: 20px;
        }

        .tab-content p {
            color: #6c757d;
            line-height: 1.8;
            margin-bottom: 15px;
        }

        .tab-content h4 {
            font-size: 1.2rem;
            font-weight: 600;
            color: #08113e;
            margin: 25px 0 15px 0;
            border-left: 4px solid #0DC9BB;
            padding-left: 15px;
        }

        .tab-content h5 {
            font-size: 1.1rem;
            font-weight: 600;
            color: #2c3e50;
            margin: 20px 0 10px 0;
        }

        .tab-content ul, .tab-content ol {
            margin: 15px 0;
            padding-left: 25px;
        }

        .tab-content li {
            color: #6c757d;
            line-height: 1.6;
            margin-bottom: 8px;
        }

        .tab-content strong {
            color: #08113e;
            font-weight: 600;
        }

        .tab-content code {
            background: #f8f9fa;
            color: #e83e8c;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
        }

        /* Fretboard Inlay Dots */
        .fret-marker {
            filter: drop-shadow(0 1px 2px rgba(0,0,0,0.1));
        }

        /* Traditional inlay dots on the fretboard */
        .fretboard-marker {
            filter: drop-shadow(0 1px 2px rgba(0,0,0,0.1));
            opacity: 0.8;
        }

        /* Additional inlay dots below the fretboard */
        .bottom-marker {
            filter: drop-shadow(0 1px 2px rgba(0,0,0,0.1));
            opacity: 0.6;
        }

        /* Key Signature Styling */
        .key-signature {
            background: rgba(255, 255, 255, 0.95);
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border: 2px solid #e9ecef;
        }

        .key-signature text {
            pointer-events: none;
        }

        /* Component-specific styling */
        .fretboard-svg {
            max-width: 100%;
            height: auto;
        }

        /* Event Log */
        .event-log {
            background: #1a1a1a;
            color: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            max-height: 300px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
        }

        .event {
            margin-bottom: 5px;
            padding: 5px 0;
        }

        .event.info { color: #0DC9BB; }
        .event.success { color: #60B05B; }
        .event.warning { color: #FAB15C; }
        .event.error { color: #E1453E; }

        /* Footer */
        .demo-footer {
            background: #08113e;
            color: white;
            padding: 40px 20px;
            text-align: center;
            margin-top: 50px;
        }

        .demo-footer p {
            opacity: 0.8;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .demo-actions {
                flex-direction: column;
                align-items: center;
            }

            .btn {
                width: 100%;
                max-width: 300px;
                justify-content: center;
            }

            .component-showcase {
                margin: -30px 10px 30px;
                padding: 30px 20px;
            }

            .controls-grid {
                grid-template-columns: 1fr;
            }

            .tabs {
                flex-wrap: wrap;
            }

            .tab {
                flex: 1;
                min-width: 120px;
                text-align: center;
            }
        }

        /* Page Layout with Navigation */
        .page-layout {
            display: flex;
            min-height: calc(100vh - 200px);
        }

        .nav-sidebar {
            width: 280px;
            background: #f8f9fa;
            border-right: 1px solid #dee2e6;
            flex-shrink: 0;
        }

        .main-content {
            flex: 1;
            min-width: 0;
        }

        @media (max-width: 1024px) {
            .page-layout {
                flex-direction: column;
            }
            
            .nav-sidebar {
                width: 100%;
                border-right: none;
                border-bottom: 1px solid #dee2e6;
            }
        }
    </style>
</head>
<body>
    <div class="demo-header">
        <div class="demo-header-content">
            <div class="demo-breadcrumb">
                <a href="index.html">← Back to Gigso Home</a> • 
                <a href="demos.html">All Demos</a> • 
                <span>Fretboard</span>
            </div>
            <h1>🎸 Fretboard Demo</h1>
            <p>Interactive guitar fretboard component for chord and scale visualization</p>
            <div class="demo-actions">
                <a href="all-together-demo.html" class="btn btn-secondary">🎵 Try Full Demo</a>
                <a href="demos.html" class="btn btn-secondary">📚 More Components</a>
            </div>
        </div>
    </div>
    
    <div class="page-layout">
        <nav class="nav-sidebar">
            <demo-navigation></demo-navigation>
        </nav>
        
        <main class="main-content">
            <div class="container">
                <!-- Component Showcase -->
                <div class="component-showcase">
                    <div class="showcase-header">
                        <h2>Component Preview</h2>
                        <p>Interactive demonstration of the Fretboard component</p>
                    </div>
                    <div class="component-container" id="component-container">
                  <fretboard-component id="demo-component"></fretboard-component>
        </div>
                </div>
                
                <!-- Controls Section -->
                <div class="controls-section">
                    <div class="controls-header">
                        <h3>🎛️ Interactive Controls</h3>
                    </div>
                    <div class="controls-grid" id="controls-grid">

                        <div class="control-group">
                            <label for="instrument-select">Instrument:</label>
                            <select id="instrument-select">
                                <option value="guitar" selected>Guitar (6-string)</option>
                                <option value="ukulele">Ukulele (4-string)</option>
                                <option value="mandolin">Mandolin (8-string)</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label for="chord-select">Chord:</label>
                            <select id="chord-select">
                                <option value="">-- Select Chord --</option>
                                <option value="C">C Major</option>
                                <option value="Am">A Minor</option>
                                <option value="F">F Major</option>
                                <option value="G">G Major</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label for="scale-root">Scale Root:</label>
                            <select id="scale-root">
                                <option value="">-- Select Root --</option>
                                <option value="C">C</option>
                                <option value="D">D</option>
                                <option value="E">E</option>
                                <option value="F">F</option>
                                <option value="G">G</option>
                                <option value="A">A</option>
                                <option value="B">B</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label for="scale-type">Scale Type:</label>
                            <select id="scale-type">
                                <option value="">-- Select Scale --</option>
                                <option value="major">Major</option>
                                <option value="naturalMinor">Natural Minor</option>
                                <option value="pentatonicMajor">Pentatonic Major</option>
                                <option value="pentatonicMinor">Pentatonic Minor</option>
                            </select>
                        </div>
                        <div class="control-group">
                            <label>Actions:</label>
                            <button id="clear-display">Clear Display</button>
                            <button id="update-range" class="secondary">Update Range</button>
                        </div>
                    
        </div>
                    <div id="status" class="status info">
                        Fretboard component loaded! Use the controls above to interact with the component.
                    </div>
                </div>
                
                <!-- Documentation Section -->
                <div class="docs-section">
                    <div class="tabs">
                        <button class="tab active" onclick="showTab('overview')">Overview</button>
                        <button class="tab" onclick="showTab('scales')">Scales & Numbers</button>
                        <button class="tab" onclick="showTab('api')">API Reference</button>
                        <button class="tab" onclick="showTab('events')">Events</button>
                        <button class="tab" onclick="showTab('examples')">Examples</button>
                        <button class="tab" onclick="showTab('events-log')">Event Log</button>
                    </div>
                    
                    <!-- Overview Tab -->
                    <div id="overview" class="tab-content active">
                        <h3>Component Overview</h3>
                        <p>Interactive guitar fretboard component for chord and scale visualization</p>
                        <p>This interactive demo allows you to explore all the features and capabilities of the Fretboard component. Use the controls above to modify the component's behavior and see the results in real-time.</p>
                    </div>
                    
                    <!-- Scales & Numbers Tab -->
                    <div id="scales" class="tab-content">
                        <h3>Scales & Numbers</h3>
                        <p>Understanding musical scales and their fretboard representations is crucial for musicians. The Fretboard component supports various scale types and provides a clear visual representation of notes.</p>
                        
                        <h4>🎵 Scale Types</h4>
                        <p>Understanding the different types of musical scales helps you choose the right sound for your music. Each scale has its own unique character and emotional quality:</p>
                        <ul>
                            <li><strong>Major Scale:</strong> The foundation of Western music, featuring a bright, happy sound. Pattern: Root, Major 2nd, Major 3rd, Perfect 4th, Perfect 5th, Major 6th, Major 7th</li>
                            <li><strong>Natural Minor Scale:</strong> A more relaxed, melancholic scale. Pattern: Root, Major 2nd, Minor 3rd, Perfect 4th, Perfect 5th, Minor 6th, Minor 7th</li>
                            <li><strong>Harmonic Minor Scale:</strong> Similar to natural minor but with a raised 7th, creating tension. Common in classical and flamenco music.</li>
                            <li><strong>Melodic Minor Scale:</strong> A jazz favorite that raises both 6th and 7th when ascending, natural minor when descending.</li>
                            <li><strong>Pentatonic Scales:</strong> Five-note scales that are easy to play and sound great. Major pentatonic removes the 4th and 7th from major scale.</li>
                            <li><strong>Blues Scale:</strong> A six-note scale that adds a "blue note" (flattened 5th) to the minor pentatonic.</li>
                            <li><strong>Dorian Mode:</strong> A minor scale with a major 6th, giving it a jazzy, sophisticated feel.</li>
                            <li><strong>Phrygian Mode:</strong> A minor scale with a flattened 2nd, creating an exotic, Spanish sound.</li>
                        </ul>
                        
                        <h4>🔢 Understanding the Numbers</h4>
                        <p>When you display a scale on the fretboard, you'll see numbers that represent different aspects of the scale:</p>
                        
                        <h5>Scale Degrees (1, 2, 3, 4, 5, 6, 7)</h5>
                        <ul>
                            <li><strong>1 (Root):</strong> The starting note of the scale - this is your "home base"</li>
                            <li><strong>2 (Second):</strong> The second note, usually a whole step above the root</li>
                            <li><strong>3 (Third):</strong> Determines if the scale is major (major 3rd) or minor (minor 3rd)</li>
                            <li><strong>4 (Fourth):</strong> The fourth note, often used in chord progressions</li>
                            <li><strong>5 (Fifth):</strong> The fifth note, very stable and commonly used in power chords</li>
                            <li><strong>6 (Sixth):</strong> The sixth note, adds color to the scale</li>
                            <li><strong>7 (Seventh):</strong> The seventh note, creates tension that resolves to the root</li>
                        </ul>
                        
                        <h5>Intervals (0, 2, 4, 5, 7, 9, 11)</h5>
                        <p>These numbers represent the distance in semitones from the root note:</p>
                        <ul>
                            <li><strong>0:</strong> Root note (0 semitones from root)</li>
                            <li><strong>2:</strong> Major 2nd (2 semitones from root)</li>
                            <li><strong>4:</strong> Major 3rd (4 semitones from root)</li>
                            <li><strong>5:</strong> Perfect 4th (5 semitones from root)</li>
                            <li><strong>7:</strong> Perfect 5th (7 semitones from root)</li>
                            <li><strong>9:</strong> Major 6th (9 semitones from root)</li>
                            <li><strong>11:</strong> Major 7th (11 semitones from root)</li>
                        </ul>
                        
                        <h4>🎯 How to Use the Scale Display</h4>
                        <ol>
                            <li><strong>Select a Scale Root:</strong> Choose the starting note (C, D, E, F, G, A, B)</li>
                            <li><strong>Choose Scale Type:</strong> Pick the scale pattern (Major, Minor, Pentatonic, etc.)</li>
                            <li><strong>View the Pattern:</strong> The fretboard will highlight all notes of that scale</li>
                            <li><strong>Practice Patterns:</strong> Use the highlighted notes to practice scales and improvisation</li>
                        </ol>
                        
                        <h4>💡 Practical Tips</h4>
                        <ul>
                            <li><strong>Start with Major Scales:</strong> They're the foundation for understanding other scales</li>
                            <li><strong>Learn the Root Note:</strong> Always know where your root note is - it's your anchor</li>
                            <li><strong>Practice in Different Positions:</strong> Try playing the same scale starting from different frets</li>
                            <li><strong>Use for Improvisation:</strong> The highlighted notes are safe to use when soloing in that key</li>
                            <li><strong>Combine with Chords:</strong> Scales and chords work together - learn which scales fit with which chord progressions</li>
                        </ul>
                        
                        <h4>🎸 Example: C Major Scale</h4>
                        <p>When you select C Major scale, you'll see:</p>
                        <ul>
                            <li><strong>Root (1):</strong> C notes highlighted in a special color</li>
                            <li><strong>Scale Notes:</strong> C, D, E, F, G, A, B all highlighted across the fretboard</li>
                            <li><strong>Pattern:</strong> The same pattern repeats every 12 frets (one octave)</li>
                        </ul>
                        <p>This scale works perfectly with C major chords and can be used for soloing in the key of C.</p>
                        
                        <h4>🧪 Try This Exercise</h4>
                        <p>Practice this common scale pattern to improve your fretboard knowledge:</p>
                        <ol>
                            <li><strong>Select C Major Scale:</strong> Use the controls above to set root to "C" and type to "Major"</li>
                            <li><strong>Find the Root Notes:</strong> Look for the specially colored C notes (these are your "home base")</li>
                            <li><strong>Play the Scale:</strong> Start from any C note and play up the scale: C → D → E → F → G → A → B → C</li>
                            <li><strong>Try Different Positions:</strong> Move to a different C note and play the same pattern</li>
                            <li><strong>Experiment with Other Keys:</strong> Try G Major (G, A, B, C, D, E, F#) or F Major (F, G, A, Bb, C, D, E)</li>
                        </ol>
                        
                        <p><strong>💡 Pro Tip:</strong> Notice how the same scale pattern appears in different positions across the fretboard. This is called "position playing" and is essential for advanced guitar techniques.</p>
                    </div>
                    
                    <!-- API Reference Tab -->
                    <div id="api" class="tab-content">
                        <h3>API Reference</h3>
                        <p>The Fretboard component provides a comprehensive API for integration into your applications.</p>
                        <p><strong>Properties:</strong> Configure the component with various properties to customize its behavior.</p>
                        <p><strong>Methods:</strong> Programmatically control the component using built-in methods for chord display and scale patterns.</p>
                        <p><strong>Events:</strong> Listen to component events to respond to user interactions and state changes.</p>
                    </div>
                    
                    <!-- Events Tab -->
                    <div id="events" class="tab-content">
                        <h3>Component Events</h3>
                        <p>The Fretboard component emits various events that you can listen to:</p>
                        <p>• <strong>Initialization:</strong> Fired when the component is ready for use</p>
                        <p>• <strong>Note Selection:</strong> Fired when users click on fret positions</p>
                        <p>• <strong>Chord Changes:</strong> Fired when chord patterns are displayed</p>
                        <p>• <strong>Scale Changes:</strong> Fired when scale patterns are updated</p>
                        <p>View the Event Log tab to see real-time events as they occur.</p>
                    </div>
                    
                    <!-- Examples Tab -->
                    <div id="examples" class="tab-content">
                        <h3>Usage Examples</h3>
                        <p>Here are some common ways to use the Fretboard component in your projects:</p>
                        <p><strong>Basic Usage:</strong><br><code>&lt;fretboard&gt;&lt;/fretboard&gt;</code></p>
                        <p><strong>With Properties:</strong><br><code>&lt;fretboard instrument="guitar" tuning="standard"&gt;&lt;/fretboard&gt;</code></p>
                        <p><strong>Event Listeners:</strong><br><code>fretboard.addEventListener('noteselect', handleNoteSelect);</code></p>
                    </div>
                    
                    <!-- Event Log Tab -->
                    <div id="events-log" class="tab-content">
                        <h3>Event Log</h3>
                        <div class="event-log" id="event-log">
                            <div class="event info">Component initialized</div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <div class="demo-footer">
        <p>🎵 Gigso Component Demo - Built with modern web technologies</p>
    </div>

    <script>
        // Tab functionality
        function showTab(tabName) {
            // Hide all tab contents
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(content => content.classList.remove('active'));
            
            // Remove active class from all tabs
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            // Show selected tab content
            document.getElementById(tabName).classList.add('active');
            
            // Add active class to clicked tab
            event.target.classList.add('active');
        }
        
        // Status update function
        function updateStatus(message, type = 'info') {
            const status = document.getElementById('status');
            status.textContent = message;
            status.className = `status ${type}`;
        }
        
        // Event logging function
        function logEvent(message, type = 'info') {
            const eventLog = document.getElementById('event-log');
            const eventDiv = document.createElement('div');
            eventDiv.className = `event ${type}`;
            eventDiv.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            eventLog.appendChild(eventDiv);
            eventLog.scrollTop = eventLog.scrollHeight;
        }
        
        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            logEvent('Demo page loaded', 'success');
        });
    </script>
    
    <!-- Component-specific script will be inserted here -->
    
    <script type="module">
        import './components/fretboard/fretboard.js';
        import './components/demo-navigation/demo-navigation.js';
        
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Fretboard Demo: DOM loaded');
            
            let retryCount = 0;
            const maxRetries = 50; // 5 seconds max
            
            // Wait for the custom element to be defined AND the component element to exist
            const waitForComponent = () => {
                retryCount++;
                if (retryCount > maxRetries) {
                    console.error('Fretboard Demo: Max retries exceeded, component failed to initialize');
                    logEvent('Component failed to initialize after maximum retries', 'error');
                    updateStatus('Error: Component failed to initialize', 'error');
                    return;
                }
                
                console.log(`Fretboard Demo: waitForComponent called (attempt ${retryCount}/${maxRetries})`);
                
                // First check if custom element is defined
                const customElement = customElements.get('fretboard-component');
                if (!customElement) {
                    console.log('Fretboard Demo: Custom element not defined yet, retrying...');
                    setTimeout(waitForComponent, 100);
                    return;
                }
                
                console.log('Fretboard Demo: Custom element is defined:', customElement);
                console.log('Fretboard Demo: Custom element name:', customElement.name);
                
                // Check if component element exists and needs to be upgraded
                let component = document.getElementById('demo-component');
                if (!component) {
                    console.log('Fretboard Demo: Component element not found, retrying...');
                    logEvent('Component element not found, retrying...', 'warning');
                    setTimeout(waitForComponent, 100);
                    return;
                }
                
                console.log('Fretboard Demo: Component element found:', component);
                console.log('Fretboard Demo: Component tagName:', component.tagName);
                console.log('Fretboard Demo: Component constructor:', component.constructor.name);
                
                // If the element is still HTMLUnknownElement, we need to recreate it
                if (component.constructor.name === 'HTMLUnknownElement') {
                    console.log('Fretboard Demo: Component needs to be recreated, doing so now...');
                    
                    // Store the current attributes
                    const instrument = component.getAttribute('instrument');
                    const chord = component.getAttribute('chord');
                    const scaleRoot = component.getAttribute('scale-root');
                    const scaleType = component.getAttribute('scale-type');
                    
                    // Remove the old element
                    component.remove();
                    
                    // Create a new element
                    const newComponent = document.createElement('fretboard-component');
                    newComponent.id = 'demo-component';
                    if (instrument) newComponent.setAttribute('instrument', instrument);
                    if (chord) newComponent.setAttribute('chord', chord);
                    if (scaleRoot) newComponent.setAttribute('scale-root', scaleRoot);
                    if (scaleType) newComponent.setAttribute('scale-type', scaleType);
                    
                    // Insert it back into the DOM
                    document.getElementById('component-container').appendChild(newComponent);
                    
                    // Update our reference
                    component = newComponent;
                    
                    console.log('Fretboard Demo: Component recreated:', component);
                    console.log('Fretboard Demo: New component constructor:', component.constructor.name);
                    
                    // Wait a bit for the new component to be fully initialized
                    setTimeout(() => {
                        // Continue with the normal flow
                        if (!component.shadowRoot) {
                            console.log('Fretboard Demo: New component shadow DOM not ready, retrying...');
                            setTimeout(waitForComponent, 100);
                            return;
                        }
                        
                        console.log('Fretboard Demo: New component shadow DOM ready');
                        
                        // Component is ready, set up event listeners
                        setupComponent(component);
                    }, 100);
                    
                    return; // Exit early since we're handling the new component separately
                }
                
                // Wait for the component to be fully connected and have its shadow DOM
                if (!component.shadowRoot) {
                    console.log('Fretboard Demo: Component shadow DOM not ready, retrying...');
                    setTimeout(waitForComponent, 100);
                    return;
                }
                
                console.log('Fretboard Demo: Component shadow DOM ready');
                
                // Component is ready, set up event listeners
                setupComponent(component);
            };
            
            const setupComponent = (component) => {
                console.log('Fretboard Demo: setupComponent called with:', component);
                
                // Fretboard specific controls
                const instrumentSelect = document.getElementById('instrument-select');
                const chordSelect = document.getElementById('chord-select');
                const scaleRoot = document.getElementById('scale-root');
                const scaleType = document.getElementById('scale-type');
                const clearDisplayBtn = document.getElementById('clear-display');
                const updateRangeBtn = document.getElementById('update-range');
                
                console.log('Fretboard Demo: Found controls:', {
                    instrumentSelect: !!instrumentSelect,
                    chordSelect: !!chordSelect,
                    scaleRoot: !!scaleRoot,
                    scaleType: !!scaleType,
                    clearDisplayBtn: !!clearDisplayBtn,
                    updateRangeBtn: !!updateRangeBtn
                });
                
                if (instrumentSelect) {
                    instrumentSelect.addEventListener('change', (e) => {
                        try {
                            component.setInstrument(e.target.value);
                            logEvent('Instrument changed to ' + e.target.value, 'info');
                            updateStatus('Instrument updated to ' + e.target.value);
                        } catch (error) {
                            console.error('Fretboard Demo: Error setting instrument:', error);
                            logEvent('Error setting instrument: ' + error.message, 'error');
                        }
                    });
                }
                
                if (chordSelect) {
                    chordSelect.addEventListener('change', (e) => {
                        try {
                            if (e.target.value) {
                                component.displayChord(e.target.value);
                                logEvent('Chord displayed: ' + e.target.value, 'success');
                                updateStatus('Displaying ' + e.target.value + ' chord');
                                scaleRoot.value = '';
                                scaleType.value = '';
                            }
                        } catch (error) {
                            console.error('Fretboard Demo: Error displaying chord:', error);
                            logEvent('Error displaying chord: ' + error.message, 'error');
                        }
                    });
                }
                
                function updateScale() {
                    const root = scaleRoot.value;
                    const type = scaleType.value;
                    
                    if (root && type) {
                        try {
                            component.displayScale(root, type);
                            logEvent('Scale displayed: ' + root + ' ' + type, 'success');
                            updateStatus('Displaying ' + root + ' ' + type + ' scale');
                            chordSelect.value = '';
                        } catch (error) {
                            console.error('Fretboard Demo: Error displaying scale:', error);
                            logEvent('Error displaying scale: ' + error.message, 'error');
                        }
                    }
                }
                
                if (scaleRoot) {
                    scaleRoot.addEventListener('change', updateScale);
                }
                
                if (scaleType) {
                    scaleType.addEventListener('change', updateScale);
                }
                
                if (clearDisplayBtn) {
                    clearDisplayBtn.addEventListener('click', () => {
                        try {
                            component.clearDisplay();
                            chordSelect.value = '';
                            scaleRoot.value = '';
                            scaleType.value = '';
                            logEvent('Display cleared', 'info');
                            updateStatus('Display cleared');
                        } catch (error) {
                            console.error('Fretboard Demo: Error clearing display:', error);
                            logEvent('Error clearing display: ' + error.message, 'error');
                        }
                    });
                }
                
                if (updateRangeBtn) {
                    updateRangeBtn.addEventListener('click', () => {
                        try {
                            component.setFretRange(0, 12);
                            logEvent('Fret range updated', 'info');
                            updateStatus('Fret range updated to 0-12');
                        } catch (error) {
                            console.error('Fretboard Demo: Error updating fret range:', error);
                            logEvent('Error updating fret range: ' + error.message, 'error');
                        }
                    });
                }
                
                // Listen for fretboard events
                component.addEventListener('note-click', (e) => {
                    logEvent('Note clicked: ' + e.detail.note, 'success');
                });
                
                // Log component initialization
                logEvent('Fretboard component initialized successfully', 'success');
                updateStatus('Fretboard component ready for interaction');
            };
            
            // Start waiting for custom element definition
            waitForComponent();
        });
    </script>
    
</body>
</html>